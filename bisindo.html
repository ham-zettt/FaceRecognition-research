<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="author" content="Trunojoyo AI" />
    <link rel="shortcut icon" href="favicon.png" />

    <meta
      name="description"
      content="
At TrunjoyoAI, we're a team of researcher and creators who came together with a passion and expertise that drive us to push the boundaries of AI and machine learning, revolutionizing industries and shaping the future of technology."
    />
    <meta name="keywords" content="Machine Learning, Artificial Intelligence, Dataset, Trunojoyo University" />

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="fonts/icomoon/style.css" />
    <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css" />
    <link rel="stylesheet" href="css/tiny-slider.css" />
    <link rel="stylesheet" href="css/aos.css" />
    <link rel="stylesheet" href="css/glightbox.min.css" />
    <link rel="stylesheet" href="css/style.css" />

    <title>Bisindo Recognition &mdash; Trunojoyo AI</title>
  </head>
  <body>
    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close">
          <span class="icofont-close js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>

    <nav class="navbar navbar-dark navbar-expand-lg site-nav">
      <div class="container">
        <a href="/" class="logo m-0 float-start fs-3">trunojoyo<span class="text-primary">.</span>ai </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse site-navigation" id="navbarText">
          <ul class="navbar-nav ms-auto mb-2 mt-3 mb-lg-0">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" style="letter-spacing: 1px; color: rgba(255, 255, 255, 0.8)" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> Research </a>
              <ul class="dropdown-menu" style="background-color: rgba(255, 255, 255, 0.2)">
                <li><a class="dropdown-item" style="color: rgba(255, 255, 255, 0.8)" href="FaceMasked/faceMasked.html">Masked Face Detection</a></li>
                <li><a class="dropdown-item" style="color: rgba(255, 255, 255, 0.8)" href="bisindo.html">BISINDO Recognition</a></li>
                <li><a class="dropdown-item" style="color: rgba(255, 255, 255, 0.8)" href="DriverDrowsiness/DriverDrowsiness.html">Driver Drowsiness Detection</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" style="letter-spacing: 1px; color: rgba(255, 255, 255, 0.8)" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> Dataset </a>
              <ul class="dropdown-menu" style="background-color: rgba(255, 255, 255, 0.2)">
                <li><a class="dropdown-item" style="color: rgba(255, 255, 255, 0.8)" href="#">Masked Face</a></li>
                <li><a class="dropdown-item" style="color: rgba(255, 255, 255, 0.8)" href="dataset/bisindo.html">Indonesian Sign Language (BISINDO)</a></li>
                <li><a class="dropdown-item" style="color: rgba(255, 255, 255, 0.8)" href="#">Driver Drowsiness</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="letter-spacing: 1px; color: rgba(255, 255, 255, 0.8)" href="about.html">About Us</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="hero-2 overlay" style="background-image: url('images/img_3.jpg')">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-5 mx-auto">
            <h1 class="mb-5 text-center"><span>BISINDO Recognition</span></h1>

            <div class="intro-desc text-left">
              <div class="line"></div>
              <p>An Artificial Intelligence that doing Recognition to Indonesian Sign Languange (Bisindo)</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="container">
        <div class="row border-bottom mb-5 pb-5 justify-content-between">
          <div class="col-lg-4 align-self-center mb-5">
            <span class="d-block subheading mb-3">Our Research</span>
            <h2 class="heading mb-4">Indonesian Sign Language Recognition</h2>
            <p>
              Indonesian Sign Language (Bisindo) Recognition powered by Artificial Intelligence: Our cutting-edge technology understands and interprets the rich and expressive world of Indonesian Sign Language, enabling seamless
              communication between the Deaf and hearing communities. Unlocking new avenues for inclusive and accessible communication through the power of AI.
            </p>
          </div>
          <div class="col-lg-7">
            <img src="images/img_4.jpg" alt="Image" class="img-fluid" />
          </div>
        </div>
        <div class="row g-5 justify-content-around pb-5">
          <div class="col-lg-4">
            <div class="d-flex custom-card">
              <div class="text">
                <h3 class="h6 fw-bold text-black">Upload a Video to Predict</h3>
                <div class="mb-3 mt-4">
                  <input class="form-control" type="file" id="videoInput" accept="video/*" />
                  <button type="submit" name="submit" id="predictVideo" class="btn btn-success rounded-3 mt-3 px-3 py-2 fs-6">Upload</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="d-flex custom-card">
              <div class="text">
                <h3 class="h6 fw-bold text-black">Prediction Result</h3>
                <br />
                <b><h4 class="h6" id="predictionResult"></h4></b>
              </div>
            </div>
          </div>
        </div>
        <div class="row g-5 justify-content-around pt-5">
          <div class="col-lg-4">
            <div class="d-flex custom-card">
              <div class="text">
                <h3 class="h6 fw-bold text-black">Realtime Video to Predict</h3>
                <div class="mb-3 mt-4">
                  <video class="input_video" style="display: none"></video>
                  <canvas class="output_canvas" width="520px" height="380px"></canvas>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="d-flex custom-card">
              <div class="text">
                <h3 class="h6 fw-bold text-black">Prediction Result</h3>
                <br />
                <b><h4 class="h6" id="predictedLetter"></h4></b>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center text-center copyright">
      <div class="col-md-8">
        <p class="small text-black-50">
          Copyright &copy;
          <script>
            document.write(new Date().getFullYear());
          </script>
          . All Rights Reserved. &mdash; Created by Trunojoyo AI Team 2023
        </p>
      </div>
    </div>

    <!-- Preloader -->
    <div id="overlayer"></div>
    <div class="loader">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/tiny-slider.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/glightbox.min.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/counter.js"></script>
    <script src="js/custom.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"></script> -->

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="bisindo/bisindo.js"></script>
    <script src="bisindo/bisindo2.js"></script>
    <script type="module">
      const videoElement = document.getElementsByClassName("input_video")[0];
      const canvasElement = document.getElementsByClassName("output_canvas")[0];
      const canvasCtx = canvasElement.getContext("2d");

      let model;
      const classList = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];

      async function loadModel() {
        model = await tf.loadLayersModel("bisindo/model-realtime/model.json");
      }

      async function onResults(results) {
        canvasCtx.save();
        canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
        canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);
        if (results.multiHandLandmarks) {
          for (const landmarks of results.multiHandLandmarks) {
            drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS, { color: "#00FF00", lineWidth: 5 });
            drawLandmarks(canvasCtx, landmarks, { color: "#FF0000", lineWidth: 2 });

            // Lakukan prediksi huruf berdasarkan landmarks
            const predictedLetter = await predictLetter(landmarks);
            console.log("Prediksi Huruf:", predictedLetter);
          }
        }
        canvasCtx.restore();
      }

      async function predictLetter(landmarks) {
        await loadModel();
        const landmarksArray = [];
        for (const landmark of landmarks) {
          landmarksArray.push(landmark.x, landmark.y, landmark.z);
        }
        let inputTensor = tf.tensor([landmarksArray]); // Ubah landmarks menjadi tensor
        inputTensor = inputTensor.expandDims(2); // Tambahkan dimensi batch
        const predictions = model.predict(inputTensor);

        // Ambil hasil prediksi sebagai array JavaScript
        const predictionsArray = await predictions.array();

        // Temukan indeks dengan nilai tertinggi sebagai prediksi huruf
        const predictedIndex = await getIndexMax(predictionsArray[0]);

        // Ubah indeks menjadi huruf A-Z
        const predictedLetter = classList[predictedIndex];
        document.getElementById("predictedLetter").innerText = "Huruf yang terdeteksi : " + predictedLetter;

        return predictedLetter;
      }

      async function getIndexMax(array) {
        let max = array[0];
        let indexMax = 0;
        for (let i = 1; i < array.length; i++) {
          if (array[i] > max) {
            max = array[i];
            indexMax = i;
          }
        }
        return indexMax;
      }

      const hands = new Hands({
        locateFile: (file) => {
          return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
        },
      });
      hands.setOptions({
        maxNumHands: 2,
        modelComplexity: 1,
        minDetectionConfidence: 0.5,
        minTrackingConfidence: 0.5,
      });
      hands.onResults(onResults);

      const camera = new Camera(videoElement, {
        onFrame: async () => {
          await hands.send({ image: videoElement });
        },
        width: 520,
        height: 380,
      });
      camera.start();
    </script>
  </body>
</html>
